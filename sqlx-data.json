{
  "db": "PostgreSQL",
  "14aad8fcb2f9d24dd78f4fee7e88e4b07f06dfe0df9575bdeeda167c182a445c": {
    "query": "\n        SELECT DISTINCT EXTRACT(DAY FROM timestamp) AS \"day!\"\n        FROM message\n        WHERE channel = $1 AND (opcode IS NULL OR opcode = 'me')\n        AND timestamp >= $2 AND timestamp < $3\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "day!",
          "type_info": "Float8"
        }
      ],
      "parameters": {
        "Left": [
          "Text",
          "Timestamptz",
          "Timestamptz"
        ]
      },
      "nullable": [
        null
      ]
    }
  },
  "53c167bcc0952912de485d569c71211ff187639a59d4c764388e90ea3ec8d7db": {
    "query": "\n        SELECT timestamp AS \"timestamp!\" FROM message WHERE channel = $1\n        ORDER BY timestamp DESC, id DESC LIMIT 1\n    ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "timestamp!",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "568d4811caeb8cce1b41a0be3afca7b938482a0c035523070a860c35af809042": {
    "query": "SELECT FROM message WHERE channel = $1 LIMIT 1",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": []
    }
  },
  "63f25710b2e80c7a66c0588dc903682d790a0d6de7f39a25c367d07fe7408e49": {
    "query": "\n        SELECT * FROM message\n        WHERE channel = $1 AND timestamp >= $2 AND timestamp < $3\n        ORDER BY timestamp\n        LIMIT $4\n    ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int4"
        },
        {
          "ordinal": 1,
          "name": "channel",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "nick",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "line",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "opcode",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "oper_nick",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "payload",
          "type_info": "Text"
        },
        {
          "ordinal": 7,
          "name": "timestamp",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Text",
          "Timestamptz",
          "Timestamptz",
          "Int8"
        ]
      },
      "nullable": [
        false,
        true,
        true,
        true,
        true,
        true,
        true,
        false
      ]
    }
  },
  "686fb4119e1a4ad1e6f3726683323a8c71f8da7636f2c7686b2b8a47e88fbd9e": {
    "query": "\n        WITH \"query\" AS (\n            SELECT row(message.*) AS \"message!:Message\",\n                   ts_headline('english', \"line\", plainto_tsquery('english', $2), U&'StartSel=\\E000, StopSel=\\E001') AS \"headline!\"\n            FROM \"message\"\n            WHERE \"channel\" || '' = $1\n              AND coalesce(\"opcode\", '') = ''\n              AND CASE WHEN $2 = '' THEN TRUE ELSE to_tsvector('english', \"nick\" || ' ' || \"line\") @@ plainto_tsquery('english', $2) END\n              AND CASE WHEN $5 = '' THEN TRUE ELSE \"nick\" LIKE $5 END\n        )\n        SELECT *, COUNT(*) OVER () \"total!\"\n        FROM \"query\" t LIMIT $3 OFFSET $4\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "message!:Message",
          "type_info": "Record"
        },
        {
          "ordinal": 1,
          "name": "headline!",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "total!",
          "type_info": "Int8"
        }
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Int8",
          "Int8",
          "Text"
        ]
      },
      "nullable": [
        null,
        null,
        null
      ]
    }
  },
  "ac1c7bbf82065e4e3745a1777df7a2fb5ede7ba15f2dbd9a4039a32b4f48f304": {
    "query": "SELECT DISTINCT channel FROM message ORDER BY channel",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "channel",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": []
      },
      "nullable": [
        true
      ]
    }
  },
  "c05a7f8f67b2703e3ad3631fb674a16c8fceaf6082efba797d2af333aa918b29": {
    "query": "\n        WITH ts AS (SELECT min(timestamp) \"first!\", max(timestamp) \"last!\" FROM message WHERE channel = $1),\n             nicks AS (SELECT DISTINCT nick FROM message WHERE channel = $1 AND coalesce(nick, '') != '' LIMIT $2)\n        SELECT \"first!\", \"last!\", array_agg(nick) \"nicks!\",\n               (SELECT row(message.*) FROM message\n                WHERE channel = $1 AND opcode = 'topic' AND coalesce(payload, '') != '' AND timestamp < $3\n                ORDER BY timestamp DESC LIMIT 1) \"topic?:Message\"\n        FROM ts, nicks GROUP BY 1, 2 LIMIT 1\n    ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "first!",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 1,
          "name": "last!",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 2,
          "name": "nicks!",
          "type_info": "TextArray"
        },
        {
          "ordinal": 3,
          "name": "topic?:Message",
          "type_info": "Record"
        }
      ],
      "parameters": {
        "Left": [
          "Text",
          "Int8",
          "Timestamptz"
        ]
      },
      "nullable": [
        null,
        null,
        null,
        null
      ]
    }
  }
}