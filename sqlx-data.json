{"db":"PostgreSQL","110b3f2c068b321832bfce7877da1a5c61f35eb45cca58b8ee0dc7f24bb7cd20":{"query":"\n        SELECT max(\"timestamp\") \"timestamp\" FROM \"message\" WHERE \"channel\" = $1\n    ","describe":{"columns":[{"ordinal":0,"name":"timestamp","type_info":"Timestamptz"}],"parameters":{"Left":["Text"]},"nullable":[null]},"hash":"110b3f2c068b321832bfce7877da1a5c61f35eb45cca58b8ee0dc7f24bb7cd20"},"29015c3947b7643a1ee5835569d46ad80d09ce081b162cf420632aa98d748517":{"query":"\n        WITH \"query\" AS (\n            SELECT row(\"message\".*) \"message!:Message\",\n                   ts_headline('english', \"line\", plainto_tsquery('english', $2), U&'StartSel=\\E000, StopSel=\\E001') \"headline!\"\n            FROM \"message\"\n            WHERE \"channel\" || '' = $1\n              AND coalesce(\"opcode\", '') = ''\n              AND CASE WHEN $2 = '' THEN TRUE ELSE to_tsvector('english', \"nick\" || ' ' || \"line\") @@ plainto_tsquery('english', $2) END\n              AND CASE WHEN $5 = '' THEN TRUE ELSE \"nick\" LIKE $5 END\n            ORDER BY \"timestamp\" DESC\n        )\n        SELECT *, COUNT(*) OVER () \"total!\"\n        FROM \"query\" t LIMIT $3 OFFSET $4\n","describe":{"columns":[{"ordinal":0,"name":"message!:Message","type_info":"Record"},{"ordinal":1,"name":"headline!","type_info":"Text"},{"ordinal":2,"name":"total!","type_info":"Int8"}],"parameters":{"Left":["Text","Text","Int8","Int8","Text"]},"nullable":[null,null,null]},"hash":"29015c3947b7643a1ee5835569d46ad80d09ce081b162cf420632aa98d748517"},"30a701311c632fa7d9ed3f71cee2c712aaf2cf780b54345eb6eca83d0d3839f9":{"query":"SELECT FROM \"message\" WHERE \"channel\" = $1 LIMIT 1","describe":{"columns":[],"parameters":{"Left":["Text"]},"nullable":[]},"hash":"30a701311c632fa7d9ed3f71cee2c712aaf2cf780b54345eb6eca83d0d3839f9"},"b129c80562d66cacc7346ec228afe395bafed773f6594528107b63e8abf29bbc":{"query":"SELECT \"channel\" FROM all_channels()","describe":{"columns":[{"ordinal":0,"name":"channel","type_info":"Text"}],"parameters":{"Left":[]},"nullable":[null]},"hash":"b129c80562d66cacc7346ec228afe395bafed773f6594528107b63e8abf29bbc"},"b7e1d8bfea3f36ffadbd4a71024e692fa48a11290b313a19b8224638bb269405":{"query":"\n        WITH \"ts\" AS (SELECT min(\"timestamp\") \"first!\", max(\"timestamp\") \"last!\" FROM \"message\" WHERE \"channel\" = $1)\n        SELECT \"first!\", \"last!\", array(SELECT \"nick\" FROM all_nicks($1, $2)) \"nicks!\",\n               (SELECT row(\"message\".*) FROM \"message\"\n                WHERE \"channel\" = $1 AND \"opcode\" = 'topic' AND coalesce(\"payload\", '') != '' AND \"timestamp\" < $3\n                ORDER BY \"timestamp\" DESC LIMIT 1) \"topic?:Message\"\n        FROM \"ts\" GROUP BY 1, 2, 3 LIMIT 1\n    ","describe":{"columns":[{"ordinal":0,"name":"first!","type_info":"Timestamptz"},{"ordinal":1,"name":"last!","type_info":"Timestamptz"},{"ordinal":2,"name":"nicks!","type_info":"TextArray"},{"ordinal":3,"name":"topic?:Message","type_info":"Record"}],"parameters":{"Left":["Text","Numeric","Timestamptz"]},"nullable":[null,null,null,null]},"hash":"b7e1d8bfea3f36ffadbd4a71024e692fa48a11290b313a19b8224638bb269405"},"e35d361afe5b3e797561507cb16c7a971013a91a40316c6efdd06efa99fc9c1c":{"query":"\n        SELECT DISTINCT EXTRACT(DAY FROM \"timestamp\")::smallint \"day!\"\n        FROM \"message\"\n        WHERE \"channel\" = $1 AND (\"opcode\" IS NULL OR \"opcode\" = 'me')\n        AND \"timestamp\" >= $2 AND \"timestamp\" < $3\n        ","describe":{"columns":[{"ordinal":0,"name":"day!","type_info":"Int2"}],"parameters":{"Left":["Text","Timestamptz","Timestamptz"]},"nullable":[null]},"hash":"e35d361afe5b3e797561507cb16c7a971013a91a40316c6efdd06efa99fc9c1c"},"e8eb7e07555d7abb03d488e6ef76ee395896e7137bc6f2257a8521c536c0ad7e":{"query":"\n        SELECT * FROM \"message\"\n        WHERE \"channel\" = $1 AND \"timestamp\" >= $2 AND \"timestamp\" < $3\n        ORDER BY \"timestamp\"\n        LIMIT $4\n    ","describe":{"columns":[{"ordinal":0,"name":"id","type_info":"Int4"},{"ordinal":1,"name":"channel","type_info":"Text"},{"ordinal":2,"name":"nick","type_info":"Text"},{"ordinal":3,"name":"line","type_info":"Text"},{"ordinal":4,"name":"opcode","type_info":"Text"},{"ordinal":5,"name":"oper_nick","type_info":"Text"},{"ordinal":6,"name":"payload","type_info":"Text"},{"ordinal":7,"name":"timestamp","type_info":"Timestamptz"}],"parameters":{"Left":["Text","Timestamptz","Timestamptz","Int8"]},"nullable":[false,true,true,true,true,true,true,false]},"hash":"e8eb7e07555d7abb03d488e6ef76ee395896e7137bc6f2257a8521c536c0ad7e"}}
